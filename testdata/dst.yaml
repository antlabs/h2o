---
package: "users"
init:
  handler: New #函数名, 名字是New认识是构造函数
  #req:
    #field:   #TODO
  resp:
    name: Users #返回的结构体名
    field:
      Host: www.xxx.com
      Org_name:  ""
      App_name: ""
      UserName: ""
muilt:

# 1.开放注册单个用户
- handler: Users.CreateUsers 
  req:
    name: CreateUsersReq
    method: POST
    url: https://{{.Host}}/{{.Org_name}}/{{.App_name}}/users
    header:
    - 'Content-Type: application/json'
    - 'Accept: application/json'
    body:
      username: user1
      password: '123'
      nickname: testuser
  resp:
    name: CreateUsersResp
    body:
      action: post
      application: 8be024f0-e978-XXXX-XXXX-5d598d5f8402
      path: "/users"
      uri: https://XXXX.com/XXXX-demo/XXXX/users
      entities:
      - uuid: 0ffe2d80-XXXX-XXXX-8d66-279e3e1c214b
        type: user
        created: 1542795196504
        modified: 1542795196504
        username: user1
        activated: true
        nickname: testuser
      timestamp: 1542795196515
      duration: 0
      organization: XXXX-demo
      applicationName: XXXX

# 2.授权注册单个用户
- handler: Users.CreateUsers2
  req:
    name: CreateUsers2Req
    url: https://{host}/{org_name}/{app_name}/users
    method: POST
    header:
    - 'Content-Type: application/json'
    - 'Accept: application/json'
    - 'Authorization:'
    body:
      - username: user1
        password: '123'
        nickname: testuser
  resp:
    name: CreateUsers2Resp
    body:
      action: post
      application: 8be024f0-XXXX-XXXX-b697-5d598d5f8402
      path: "/users"
      uri: https://XXXX/XXXX/XXXX/users
      entities:
      - uuid: 0ffe2d80-XXXX-XXXX-8d66-279e3e1c214b
        type: user
        created: 1542795196504
        modified: 1542795196504
        username: user1
        activated: true
        nickname: testuser
      timestamp: 1542795196515
      duration: 0
      organization: XXXX
      applicationName: XXXX
# 3.批量注册用户
- handler: Users.CreateUsers3
  req:
    name: CreateUsers3Req
    url: https://{host}/{org_name}/{app_name}/users
    method: POST
    header:
    - 'Content-Type: application/json'
    - 'Authorization:'
    body:
      - username: user1
        password: '123'
        nickname: testuser1
      - username: user2
        password: '456'
        nickname: testuser2
  resp:
    name: CreateUsers3Resp
    body:
      action: post
      application: 22bcffa0-XXXX-XXXX-9df8-516f6df68c6d
      path: "/users"
      uri: https://XXXX/XXXX/XXXX/users
      entities:
      - uuid: 278b5e60-XXXX-XXXX-8f9b-d5d83ebec806
        type: user
        created: 1541587920710
        modified: 1541587920710
        username: user1
        activated: true
        nickname: testuser1
      - uuid: 278bac80-XXXX-XXXX-b192-73e4cd5078a5
        type: user
        created: 1541587920712
        modified: 1541587920712
        username: user2
        activated: true
        nickname: testuser2
      timestamp: 1541587920714
      data: []
      duration: 0
      organization: XXXX
      applicationName: XXXX

# 4.获取单个用户的详情
- handler: Users.GetUser
  req:
    name: GetUserReq
    url: https://{{.Host}}/{{.Org_name}}/{{.App_name}}/users/{{.UserName}}
    method: GET
    header:
    - 'Content-Type: application/json'
    - 'Authorization:'
    body:
  resp:
    name: GetUserResp
    body:
      action: get
      path: "/users"
      uri: http://XXXX/XXXX/XXXX/users/XXXX
      entities:
      - uuid: 0ffe2d80-XXXX-XXXX-8d66-279e3e1c214b
        type: user
        created: 1542795196504
        modified: 1542795196504
        username: XXXX
        activated: true
        nickname: testuser
      timestamp: 1542798985011
      duration: 6
      count: 1

# 5.获取用户列表
- handler: Users.GetUserList
  req:
    name: GetUserListReq
    url: https://{{.Host}}/{{.Org_name}}/{.App_name}/users?limit=2&cursor=LTgzXXXXtB

    method: GET
    header:
      #- 'Content-Type: application/json'
    - 'Accept: application/json'
    - 'Authorization:'
    body:
  resp:
    name: GetUserListResp
    body:
      action: get
      params:
        limit:
        - '2'
      path: "/users"
      uri: http://XXXX/XXXX/XXXX/users
      entities:
      - uuid: ab90eff0-XXXX-XXXX-9174-8f161649a182
        type: user
        created: 1542356511855
        modified: 1542356511855
        username: XXXX
        activated: true
        nickname: user1
      - uuid: b2aade90-XXXX-XXXX-a974-f3368f82e4f1
        type: user
        created: 1542356523769
        modified: 1542356523769
        username: user2
        activated: true
        nickname: user2
      timestamp: 1542558467056
      duration: 11
      cursor: LTgzXXXX2tB
      count: 2

