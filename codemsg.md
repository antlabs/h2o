
## codemsg 子命令
只要实现code，自动生成String()类型和CodeMsg类型。可以在错误码代码节约时间  
1.给每个ErrNo类型生成String()方法, 内容就是注释里面的。  
2.给每个ErrNo类型生成CodeMsg{}结构
```go
// 这段代码是我们要写的。
package demo

type ErrNo int32 // 这里的类型可以自定义，--type后面类型

const (
	ENo ErrNo = 1003 // 号码出错

	ENotFound ErrNo = 1004 // 找不到
)

```

生成的CodeMsg代码如下
```go
// Code generated by "h2o codemsg --code-msg --linecomment --type ErrNo ./testdata/err.go"; DO NOT EDIT."

package demo

import (
	"encoding/json"
	"strings"
)

type CodeMsger interface {
	SetCode(int)
	SetMsg(string)
	GetCode() int
	GetMsg() string
}

var _ CodeMsger = (*CodeMsg)(nil)

type CodeMsg struct {
	Code    ErrNo  "json:\"code\""
	Message string "json:\"message\""
}

func (x *CodeMsg) Error() string {
	all, _ := json.Marshal(x)
	var b strings.Builder
	b.Write(all)
	return b.String()
}

func (x *CodeMsg) SetCode(code int) {
	x.Code = ErrNo(code)
}

func (x *CodeMsg) SetMsg(msg string) {
	x.Message = msg
}

func (x *CodeMsg) GetCode() int {
	return int(x.Code)
}

func (x *CodeMsg) GetMsg() string {
	return x.Message
}

func NewCodeMsg(code ErrNo) error {
	return &CodeMsg{
		Code:    code,
		Message: code.String(),
	}
}

var (
	ErrCodeMsgENo error = NewCodeMsg(ENo) //号码出错

	ErrCodeMsgENotFound error = NewCodeMsg(ENotFound) //找不到

)
```
```bash
./h2o codemsg --code-msg --linecomment --string --type ErrNo ./testdata/err.go
// 如果要修改生成的String方法名， 可以通过--string-method String2  选项
// 如果要生成grpc的错误就用下面的命令
// h2o codemsg --code-msg --linecomment --type ErrNo ./testdata/err.go --grpc --string-method string2 --string
```
